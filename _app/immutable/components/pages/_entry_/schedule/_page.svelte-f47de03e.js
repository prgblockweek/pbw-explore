import{S as J,i as O,s as Q,a as V,w as P,k as T,L as R,h as $,c as q,x as A,l as M,m as k,n as E,b as B,y as C,F as v,f as S,d as U,t as I,z as F,M as X,K as Y,q as L,r as W,u as z,g as Z}from"../../../../chunks/index-41559e88.js";import{p as x}from"../../../../chunks/stores-ec53abc6.js";import{T as ee}from"../../../../chunks/TimelineHeatmap-0fa5a5d5.js";import{C as te}from"../../../../chunks/CalendarList-10f7ffc8.js";import{F as ae,f as H,d as K,b as se,c as N}from"../../../../chunks/Footer-3d9c4987.js";import{H as ne}from"../../../../chunks/EventTypeBadge-29e17861.js";function j(n,i,f){const r=n.slice();return r[4]=i[f],r}function G(n){let i,f,r,_=H(new Date(n[4].date),"MMMM d, yyyy")+"",u,g,l,d,y,h=H(new Date(n[4].date),"EEEE")+"",c,p,m,t,w;return t=new te({props:{date:n[2].params.date,segments:n[4].segments,entry:n[2].params.entry,bundle:n[0].bundle}}),{c(){i=T("div"),f=T("h2"),r=T("a"),u=L(_),l=V(),d=T("span"),y=L("- "),c=L(h),p=V(),m=T("div"),P(t.$$.fragment),this.h()},l(e){i=M(e,"DIV",{class:!0});var a=k(i);f=M(a,"H2",{class:!0});var o=k(f);r=M(o,"A",{href:!0,class:!0});var b=k(r);u=W(b,_),b.forEach($),l=q(o),d=M(o,"SPAN",{class:!0});var s=k(d);y=W(s,"- "),c=W(s,h),s.forEach($),o.forEach($),p=q(a),m=M(a,"DIV",{class:!0});var D=k(m);A(t.$$.fragment,D),D.forEach($),a.forEach($),this.h()},h(){E(r,"href",g="/"+n[2].params.entry+"/day/"+n[4].date),E(r,"class","text-pbw-red hover:underline"),E(d,"class","dark:text-gray-500"),E(f,"class","text-3xl md:text-3xl"),E(m,"class","mt-6"),E(i,"class","mb-14")},m(e,a){B(e,i,a),v(i,f),v(f,r),v(r,u),v(f,l),v(f,d),v(d,y),v(d,c),v(i,p),v(i,m),C(t,m,null),w=!0},p(e,a){(!w||a&2)&&_!==(_=H(new Date(e[4].date),"MMMM d, yyyy")+"")&&z(u,_),(!w||a&6&&g!==(g="/"+e[2].params.entry+"/day/"+e[4].date))&&E(r,"href",g),(!w||a&2)&&h!==(h=H(new Date(e[4].date),"EEEE")+"")&&z(c,h);const o={};a&4&&(o.date=e[2].params.date),a&2&&(o.segments=e[4].segments),a&4&&(o.entry=e[2].params.entry),a&1&&(o.bundle=e[0].bundle),t.$set(o)},i(e){w||(S(t.$$.fragment,e),w=!0)},o(e){I(t.$$.fragment,e),w=!1},d(e){e&&$(i),F(t)}}}function re(n){let i,f,r,_,u,g,l,d,y,h,c,p;document.title=i="Schedule | #PBW"+n[2].params.entry+" Explore",r=new ne({props:{path:!1,type:"schedule"}}),d=new ee({props:{data:n[0],highlightDay:n[2].params.date}});let m=n[1],t=[];for(let e=0;e<m.length;e+=1)t[e]=G(j(n,m,e));const w=e=>I(t[e],1,1,()=>{t[e]=null});return c=new ae({props:{bundle:n[0].bundle}}),{c(){f=V(),P(r.$$.fragment),_=V(),u=T("div"),g=T("div"),l=T("div"),P(d.$$.fragment),y=V();for(let e=0;e<t.length;e+=1)t[e].c();h=V(),P(c.$$.fragment),this.h()},l(e){R("svelte-wf5yqv",document.head).forEach($),f=q(e),A(r.$$.fragment,e),_=q(e),u=M(e,"DIV",{class:!0});var o=k(u);g=M(o,"DIV",{class:!0});var b=k(g);l=M(b,"DIV",{class:!0});var s=k(l);A(d.$$.fragment,s),y=q(s);for(let D=0;D<t.length;D+=1)t[D].l(s);h=q(s),A(c.$$.fragment,s),s.forEach($),b.forEach($),o.forEach($),this.h()},h(){E(l,"class","mx-4 xl:mx-0"),E(g,"class","max-w-7xl mx-auto pt-5 md:pt-10"),E(u,"class","w-full")},m(e,a){B(e,f,a),C(r,e,a),B(e,_,a),B(e,u,a),v(u,g),v(g,l),C(d,l,null),v(l,y);for(let o=0;o<t.length;o+=1)t[o].m(l,null);v(l,h),C(c,l,null),p=!0},p(e,[a]){(!p||a&4)&&i!==(i="Schedule | #PBW"+e[2].params.entry+" Explore")&&(document.title=i);const o={};if(a&1&&(o.data=e[0]),a&4&&(o.highlightDay=e[2].params.date),d.$set(o),a&7){m=e[1];let s;for(s=0;s<m.length;s+=1){const D=j(e,m,s);t[s]?(t[s].p(D,a),S(t[s],1)):(t[s]=G(D),t[s].c(),S(t[s],1),t[s].m(l,h))}for(Z(),s=m.length;s<t.length;s+=1)w(s);U()}const b={};a&1&&(b.bundle=e[0].bundle),c.$set(b)},i(e){if(!p){S(r.$$.fragment,e),S(d.$$.fragment,e);for(let a=0;a<m.length;a+=1)S(t[a]);S(c.$$.fragment,e),p=!0}},o(e){I(r.$$.fragment,e),I(d.$$.fragment,e),t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)I(t[a]);I(c.$$.fragment,e),p=!1},d(e){e&&$(f),F(r,e),e&&$(_),e&&$(u),F(d),X(t,e),F(c)}}}function le(n,i,f){let r,_;Y(n,x,l=>f(2,_=l));let{data:u}=i;function g(l){const d=[];for(let y=0;y<K.days;y++){const h=H(se(new Date(K.date),y),"yyyy-MM-dd"),c={start:h+"T00:00",end:h+"T23:59"};let p=[];for(const m of l)for(const t of m.segments)N(new Date(t.startTime),new Date(c.end))<=0&&N(new Date(t.startTime),new Date(c.start))>=0&&p.push({startTime:t.startTime,endTime:t.endTime,event:m,title:t.title,venues:t.venues||m.venues||!1});p=p.sort((m,t)=>m.startTime>t.startTime?1:-1),d.push({date:h,segments:p})}return d}return n.$$set=l=>{"data"in l&&f(0,u=l.data)},n.$$.update=()=>{n.$$.dirty&1&&f(1,r=g(u.bundle.events))},[u,r,_]}class ce extends J{constructor(i){super(),O(this,i,le,re,Q,{data:0})}}export{ce as default};
