<script>
	import CollectionList from '$lib/components/CollectionList.svelte';
	import TimelineHeatmap from '$lib/components/TimelineHeatmap.svelte';
	import Footer from '$lib/components/Footer.svelte';
	import { page } from '$app/stores';
	import HomepageButton from '$lib/components/HomepageButton.svelte';
	import DarkModeToggle from '$lib/components/DarkModeToggle.svelte';

	export let data;
	$: entry = $page.params.entry;
	$: conferences = data.bundle.events.filter((e) =>
		e.types.find((t) => ['conference', 'hackathon'].includes(t))
	);
	$: otherEvents = data.bundle.events.filter(
		(e) => !e.types.find((t) => ['conference', 'hackathon'].includes(t))
	);

	const collections = [
		{ title: 'Days', value: 10, col: 'schedule' },
		{ title: 'Events', col: 'events' },
		{ title: 'Speakers', col: 'speakers' },
		{ title: 'Places', col: 'places' },
		{ title: 'Media Partners', col: 'media-partners' },
		//{ title: "Blockchains", col: "chains" },
		//{ title: "Unions", col: "unions" },
		{ title: 'Benefits', col: 'benefits' }
	];
</script>

<svelte:head>
	<title>#PBW{$page.params.entry} Explore</title>
</svelte:head>

<div class="w-full min-h-[98vh] bg-pbw-red bg-[url('/pbw-bg-3.jpg')] bg-cover bg-center relative  rounded-br-[50px] shadow-md shadow-black">    
    <div class="px-6 xl:px-0">
        <div class="max-w-7xl mx-auto pt-10 pb-6 ">
            <div class="flex w-full justify-between">
                <h1 class="text-5xl lg:text-7xl uppercase font-bold text-pbw-white">
                    <div class="md:w-1/2"><a href="https://prgblockweek.com">Prague Blockchain Week 2023</a></div>
                </h1>
                <div><DarkModeToggle /></div>
            </div>
            <div class="text-4xl text-pbw-yellow">June 2-11, 2023</div>
            <div class="py-6 lg:py-24 text-md lg:text-xl text-white">A decentralized gathering of all people interested in cryptocurrencies and related topics.</div>
            <div class="flex flex-wrap w-full justify-between gap-4">
                {#each collections as cd}
                    <HomepageButton 
                        link="/{$page.params.entry}/{cd.col}"
                        count={cd.value || data.bundle[cd.col]?.length}
                        text={cd.title}
                    />
                {/each}
            </div>
        </div>
    </div>
</div>


<div class="w-full px-6 xl:mx-0">
	<div class="max-w-7xl mx-auto pt-2">

		<TimelineHeatmap {data} />

		<h2 class="text-2xl uppercase font-bold text-gray-500">
			<a href="/{entry}/events">Conferences & Hackathons</a> ({conferences.length})
		</h2>
		<div
			class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 my-6 text-center text-2xl"
		>
			<CollectionList arr={conferences} img="logo" col="event" {entry} offer={true} />
		</div>
		<h2 class="text-2xl uppercase font-bold text-gray-500">
			<a href="/{entry}/events">Other events</a> ({otherEvents.length})
		</h2>
		<div
			class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 my-6 text-center text-2xl"
		>
			<CollectionList arr={otherEvents} img="logo" col="event" {entry} />
		</div>
		<h2 class="text-2xl uppercase font-bold mt-10 text-gray-500">
			<a href="/{entry}/speakers">Speakers</a> ({data.bundle.speakers.length})
		</h2>
		<h2 class="text-xl uppercase font-bold mt-10 text-gray-500">International ðŸŒŽ</h2>
		<div
			class="grid grid-cols-3 sm:grid-cols-3 md:grid-cols-6 xl:grid-cols-8 my-6 text-center text-xl"
		>
			<CollectionList
				arr={data.bundle.speakers.filter((s) => !['cz', 'sk'].includes(s.country))}
				{entry}
			/>
		</div>
		<h2 class="text-xl uppercase font-bold mt-10 text-gray-500">Local - Czech ðŸ‡¨ðŸ‡¿ & Slovak ðŸ‡¸ðŸ‡°</h2>
		<div
			class="grid grid-cols-3 sm:grid-cols-3 md:grid-cols-6 xl:grid-cols-8 my-6 text-center text-xl"
		>
			<CollectionList
				arr={data.bundle.speakers.filter((s) => ['cz', 'sk'].includes(s.country))}
				{entry}
			/>
		</div>
		<h2 class="text-2xl uppercase font-bold mt-10 text-gray-500">
			<a href="/{entry}/places">Places</a> ({data.bundle.places.length})
		</h2>
		<div
			class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 my-6 text-center text-2xl"
		>
			<CollectionList arr={data.bundle.places} col="place" img="photo" {entry} />
		</div>
		{#if data.bundle.benefits}
			<h2 class="text-2xl uppercase font-bold text-gray-500">
				<a href="/{entry}/benefits">Benefits for visitors</a> ({data.bundle.benefits.length})
			</h2>
			<div
				class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 my-6 text-center text-xl mb-8"
			>
				<CollectionList
					arr={data.bundle.benefits}
					img="logo"
					col="benefit"
					{entry}
					aspect="aspect-[16/9]"
					offer={true}
				/>
			</div>
		{/if}
		{#if data.bundle['media-partners']}
			<h2 class="text-2xl uppercase font-bold text-gray-500">
				<a href="/{entry}/media-partners">Media Partners & Communities</a> ({data.bundle[
					'media-partners'
				].length})
			</h2>
			<h2 class="text-xl uppercase font-bold mt-10 text-gray-500">International ðŸŒŽ</h2>
			<div
				class="grid grid-cols-3 sm:grid-cols-5 md:grid-cols-7 xl:grid-cols-9 my-6 text-center text-2xl mb-8"
			>
				<CollectionList
					arr={data.bundle['media-partners'].filter(
						(m) => !['czech', 'slovak'].includes(m.languages[0])
					)}
					img="logo"
					col="media-partner"
					{entry}
					aspect="aspect-[16/9]"
					size="small"
				/>
			</div>
			<h2 class="text-xl uppercase font-bold mt-10 text-gray-500">Local - Czech ðŸ‡¨ðŸ‡¿ & Slovak ðŸ‡¸ðŸ‡°</h2>
			<div
				class="grid grid-cols-3 sm:grid-cols-5 md:grid-cols-7 xl:grid-cols-9 my-6 text-center text-2xl mb-8"
			>
				<CollectionList
					arr={data.bundle['media-partners'].filter((m) =>
						['czech', 'slovak'].includes(m.languages[0])
					)}
					img="logo"
					col="media-partner"
					{entry}
					aspect="aspect-[16/9]"
					size="small"
				/>
			</div>
		{/if}
		<!--h2 class="text-2xl uppercase font-bold text-gray-500">Unions ({data.bundle.unions.length})</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-5 my-6 text-center text-3xl mb-8">
            <CollectionList arr={data.bundle.unions} img="logo" col="union" entry={entry}/>
        </div>

        <h2 class="text-2xl uppercase font-bold mt-10 text-gray-500"><a href="/{entry}/chains">Blockchains</a> ({data.bundle.chains.length})</h2>       
        <div class="grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 xl:grid-cols-12 my-6 text-center text-xl">
            <CollectionList arr={data.bundle.chains} col="chain" img="logo" entry={entry} />
        </div-->

		<Footer bundle={data.bundle} />
	</div>
</div>
